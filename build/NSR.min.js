/*
JS Name String Resolver DB (https://github.com/mgreter/nsr.js)
- Copyright (c) 2017 Marcel Greter (http://github.com/mgreter)
*/;
(function(t){function r(a,b){if(a instanceof ArrayBuffer)a=new Uint32Array(a);else if(a instanceof Array)a=new Uint32Array(a);else if(!(a instanceof Uint32Array))throw Error("Unsupported input");this._off=b|0;this._arr=a;if(827478862!==a[this._off+0])throw Error("Invalid DB identifier!");this.words=a[this._off+1];this._off+=2}function q(a,b,c,h){this._db=a;this._ptrs=b||[0];this._val=null==c?!1:c;this._jmp=null==h?!1:h}var u=String.fromCharCode;(function(a){a.hasValJmp=function(b){return!!(this._arr[(b|
0)+this._off]&3221225472)};a.hasVal=function(b){return!!(this._arr[(b|0)+this._off]&2147483648)};a.hasJmp=function(b){return!!(this._arr[(b|0)+this._off]&1073741824)};a.getCode=function(b){return this._arr[(b|0)+this._off]&65535};a.getChar=function(b){b=this.getCode(b);if("undefined"!=typeof b)return String.fromCharCode(b)};a.codeAt=function(b,c){var a=0;b|=0;c|=0;for(var e=this._off|0,d=this._arr;c<d.length;){var f=d[e+c++],g=!!(f&2147483648),l=!!(f&1073741824),f=f&65535;if(0===f)break;l&&++c;g&&
++c;if(a===b)return f;a++}};a.charAt=function(b,c){b=this.codeAt(b,c);if("undefined"!=typeof b)return String.fromCharCode(b)};a.codes=function(b){var c=[];b|=0;for(var a=this._off|0,e=this._arr;b<e.length;){var d=e[a+b++],f=!!(d&2147483648),g=!!(d&1073741824),d=d&65535;if(0===d)break;g&&++b;f&&++b;if(!g&&!f)break;c.push(d)}return c};a.chars=function(b){if(!1!==this._jmp){for(var c=this.codes(b),a=0;a<c.length;a++)c[a]=u(c[a]);return String.fromCharCode.apply(String,this.codes(b)).split("")}console.warn("Invalid result for query!")};
a.path=function(b){var c="";b=b||[];for(var a=0;a<b.length;a++)c+=this.getChar(b[a]);return c};a.find=function(b,c){if(!Array.isArray(b))throw Error("find expects an array!");var a=this._arr,e=this._off|0,d=0;if(0==b.length)debugger;var f=b[0],g=[];if(c){d=c;c=a[e+d++];var l,k=!!(c&1073741824),m;c&2147483648&&d++;var p=k?a[e+d++]:null;if(!k)throw Error("Not a valid branch");k&&(d=p)}for(;d<a.length;){c=d;var n=a[e+d++];l=!!(n&2147483648);k=!!(n&1073741824);m=l?a[e+d++]:null;p=k?a[e+d++]:null;if(0===
n)break;n&=65535;if((k||l)&&f===n){if(g.length+1===b.length)return g.push(c),new q(this,g,m,p);if(k)g.push(c),f=b[g.length],d=p;else break}}};a.search=function(b,a){if("string"!=typeof b)throw Error("search expects a string!");for(var h=[],e=b.length,d=0;d<e;d++)h[d]=b.charCodeAt(d);return this.find(h,a)};a.next=function(b){var a=this._arr,h=this._off|0,e=0;b=Array.isArray(b)?[].concat(b):b?[b]:[];if(b.length){var d=e=b.pop(),f=a[h+e++],g=!!(f&1073741824),l;f&2147483648&&e++;var k=g?a[h+e++]:null;
g&&(b.push(d),e=k)}for(;e<a.length;){var d=e,m=a[h+e++],f=!!(m&2147483648),g=!!(m&1073741824);l=f?a[h+e++]:null;k=g?a[h+e++]:null;if(0===m){if(b.length){e=b.pop();f=a[h+e++];f&2147483648&&e++;f&1073741824&&e++;continue}break}if(g||f){if(f)return b.push(d),new q(this,b,l,k);if(g)b.push(d),e=k;else debugger}}};a.get=function(b){for(var a=this.next();a&&b--;)a=a.next();return a}})(r.prototype);(function(a){a.isLeaf=function(){return 0!=this._val};a.isBranch=function(){return 0!=this._jmp};a.code=function(){if(0!=
this._ptrs.length)return this._db.getCode(this.ptr())};a.char=function(){if(0!=this._ptrs.length)return this._db.getChar(this.ptr())};a.ptr=function(){var b=this._ptrs,a=b.length;if(0<a)return b[a-1];throw Error("Not a valid node!");};a.val=function(){if(!1!==this._val)return this._val;throw Error("Not a valid leaf!");};a.jmp=function(){if(!1!==this._jmp)return this._jmp;throw Error("Not a valid branch!");};a.next=function(){return this._db.next(this._ptrs)};a.search=function(a){var c=this.ptr();
if(a=this._db.search(a,c))a._ptrs=this._ptrs.concat(a._ptrs);return a};a.find=function(a){var c=this.ptr();return this._db.find(a,c)};a.chars=function(){var a=this.jmp();return this._db.chars(a)};a.path=function(){for(var a=this._db,c="",h=0,e=this._ptrs,d=e.length;h<d;)var f=e[h++],c=c+a.getChar(f);return c}})(q.prototype);t.NSR=r})(this);
